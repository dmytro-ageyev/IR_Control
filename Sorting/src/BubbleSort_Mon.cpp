/**
 * @file BubbleSort_Mon.cpp
 * @brief Реалізація сортування масиву цілих чисел методом бульбашки з моніторингом процесу через Serial.
 *
 * Цей файл містить функцію BubbleSort_Mon, яка виконує сортування масиву цілих чисел
 * методом бульбашки та детально виводить процес сортування у Serial Monitor для відлагодження.
 */

#include "BubbleSort_Mon.h"

/**
 * @brief Сортує масив цілих чисел методом бульбашки з детальним виводом процесу сортування через Serial.
 *
 * Функція виконує сортування масиву arr розміром size за допомогою алгоритму Bubble Sort.
 * На кожному проході виводиться інформація про поточний стан масиву, обміни елементів,
 * а також повідомлення про завершення сортування, якщо масив вже впорядкований.
 *
 * @param arr Масив цілих чисел для сортування.
 * @param size Кількість елементів у масиві.
 */
void BubbleSort_Mon(int arr[], int size) {
  Serial.println("=== Початок сортування методом 'Бульбашки' ===\r\n");
  
  // Зовнішній цикл — кількість проходів
  for (int i = 0; i < size - 1; i++) {
    Serial.print("Прохід №");
    Serial.println(i + 1);

    bool swapped = false; // Прапорець, щоб перевіряти, чи були зміни

    // Внутрішній цикл — порівняння сусідніх елементів
    for (int j = 0; j < size - i - 1; j++) {
      if (arr[j] > arr[j + 1]) {
        // Обмін елементів місцями
        int temp = arr[j];
        arr[j] = arr[j + 1];
        arr[j + 1] = temp;
        swapped = true;

        // Вивід поточного стану масиву після обміну
        Serial.print("  Обмін елементів ");
        Serial.print(j + 1);
        Serial.print(" і ");
        Serial.print(j + 2);
        Serial.println(": ");
        for (int k = 0; k < size; k++) {
          Serial.print(arr[k]);
          if (k < size - 1) Serial.print("\t");
        }
        Serial.println("\r\n");
      }
    }

    // Якщо жодного обміну не було — масив уже відсортований
    if (!swapped) {
      Serial.println("  Немає обмінів — масив уже відсортований.\r\n");
      break;
    }
    
    Serial.print("Бульбашка всплила: ");
    Serial.println(arr[size - i -1]); 
    Serial.println(); // Порожній рядок між проходами
  }

  Serial.println("=== Сортування завершено ===\r\n");
}
